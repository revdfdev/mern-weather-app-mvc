(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(e,t,a){e.exports=a(71)},43:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=(a(43),a(73)),l=function(e){var t=e.children;return r.a.createElement(s.a,{fluid:!0},t)},i=a(13),u=a(12),m=a(8),p=a.n(m),d=a(18),h=a(7),f=a(10),E=a(35),v=a.n(E).a.create({baseURL:"http://localhost:4000",timeout:2e4,headers:{Accept:"application/json","Content-Type":"application/json"}}),g=function(e){return v.get("/api/v1/city/cities",{params:Object(h.a)({},e)})},w=function(e){return v.get("/api/v1/current-weather/city",{params:{city:e}})},b=p.a.mark(x),y=p.a.mark(k),j="weather-test/search/CITY_SEARCH_FAILURE",N={suggestions:[],error:null,isLoading:!1};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(h.a)({},N),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"weather-test/search/CITY_SEARCH_SUCCESSFUL":return console.log(t.suggestions),Object(h.a)({},e,{suggestions:t.suggestions,isLoading:!1});case j:return Object(h.a)({},e,{error:t.error,isLoading:!1});default:return e}}function C(e){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t);case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function x(e){var t,a,n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.searchTerm,console.log("handling call"),r.prev=2,a={cityName:t},r.next=6,Object(f.b)(C,a);case 6:return n=r.sent,console.log(n.data.data),r.next=10,Object(f.c)({suggestions:n.data.data,type:"weather-test/search/CITY_SEARCH_SUCCESSFUL"});case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(2),r.next=16,Object(f.c)({error:r.t0.message,type:j});case 16:case"end":return r.stop()}}),b,null,[[2,12]])}function k(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("weather-test/search/CITY_SEARCH",x);case 2:case"end":return e.stop()}}),y)}var I=p.a.mark(F),S=p.a.mark(H),T={weatherInfo:{cityname:"",temp:0,temp_min:0,temp_max:0,condition:{name:"",description:"",icon:""}},isLoading:!0,error:null,errorCode:null};function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(h.a)({},T),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"weather-test/weather/GET_WEATHER_INFO_SUCCESS":var a=t.weatherInfo,n=a.cityname,r=a.temp,c=a.temp_min,o=a.temp_max,s=a.condition;return Object(h.a)({},e,{weatherInfo:Object(h.a)({},e.weatherInfo,{cityname:n,temp:r,temp_min:c,temp_max:o,condition:Object(h.a)({},e.weatherInfo.condition,{name:s.name,description:s.description,icon:s.icon})}),isLoading:!1,error:null});case"weather-test/weather/GET_WEATHER_INFO_FAILURE":return Object(h.a)({},e,{error:t.error,errorCode:t.errorCode,isLoading:!1});default:return e}}function A(e){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t);case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function F(e){var t,a,n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.cityname,r.prev=1,r.next=4,Object(f.b)(A,t);case 4:return a=r.sent,console.log("condition",a.data.data.weather[0].description),n={cityname:t,temp:Math.round(Number(a.data.data.main.temp)-273.15),temp_min:Math.round(Number(a.data.data.main.temp_min)-273.15),temp_max:Math.round(Number(a.data.data.main.temp_max)-273.15),condition:{name:a.data.data.weather[0].main,description:a.data.data.weather[0].description,icon:"http://openweathermap.org/img/wn/".concat(a.data.data.weather[0].icon,"@2x.png")}},r.next=9,Object(f.c)({type:"weather-test/weather/GET_WEATHER_INFO_SUCCESS",weatherInfo:n});case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,Object(f.c)({error:r.t0.message,errorCode:r.t0.response.status,type:"weather-test/weather/GET_WEATHER_INFO_FAILURE"});case 15:case"end":return r.stop()}}),I,null,[[1,11]])}function H(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("weather-test/weather/GET_WEATHER_INFO",F);case 2:case"end":return e.stop()}}),S)}var U=p.a.mark(D);function D(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([k(),H()]);case 2:case"end":return e.stop()}}),U)}var W=a(37),G=Object(W.a)(),M=[G];var V=a(15),Y=a(4),J=a(19),P=a(36),q=function(e){var t=e.suggestion,a=e.onSuggestionClick;return r.a.createElement("li",{className:"list-group-item custom-dropdown",onClick:function(e){a(e,t.name)}},"".concat(t.name)+" - ".concat(t.country))};a(67);var B=function(e){var t=e.suggestions,a=e.onItemClicked;return r.a.createElement("div",{className:"custom-dropdown-container"},r.a.createElement("ul",{className:"list-group"},t.map((function(e){return console.log(e),r.a.createElement(q,{key:e.cityId,suggestion:e,onSuggestionClick:a})}))))};var X=function(e){Object(J.a)(e);var t=Object(n.useState)({showDropDown:!1,selectedValue:""}),a=Object(P.a)(t,2),c=a[0],o=a[1],s=Object(i.c)((function(e){return console.log(JSON.stringify(e)),e.search.suggestions})),l=Object(i.b)(),u=Object(n.useRef)();Object(n.useEffect)((function(){}),[s]);var m=function(){o((function(e){return Object(h.a)({},e,{showDropDown:!0})})),document.addEventListener("click",(function(e){u&&u.current&&u.current.parentNode.contains(u.current)&&p()}))},p=function(){o((function(e){return Object(h.a)({},e,{showDropDown:!1})})),document.removeEventListener("clikc",(function(e){}))};return r.a.createElement("div",{className:"col-md-12",ref:u},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",name:"search",placeholder:"Search for the city",className:"form-control","aria-label":"city-input",autoComplete:"off",value:c.selectedValue,onChange:function(e){var t=e.target.value;console.log(t),o((function(e){return Object(h.a)({},e,{selectedValue:t})})),t.length>=3&&(l({type:"weather-test/search/CITY_SEARCH",searchTerm:t}),m())}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-primary btn-md",onClick:function(e){e.preventDefault(),l({type:"weather-test/weather/GET_WEATHER_INFO",cityname:c.selectedValue})}},"Get weather"))),c.showDropDown&&s&&s.length>0?r.a.createElement(B,{suggestions:s,onItemClicked:function(e,t){e.preventDefault(),console.log(t),o((function(e){return Object(h.a)({},e,{selectedValue:t})})),p()}}):null)};a(68);var z=function(e){var t=e.weatherInfo;return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"weather"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card"},r.a.createElement("span",{className:"icon"},r.a.createElement("img",{className:"img-fluid",src:t.condition.icon})),r.a.createElement("div",{className:"title"},r.a.createElement("p",null,t.cityname)),r.a.createElement("div",{className:"temp"},"+",t.temp,r.a.createElement("sup",null,"\xb0"),"c"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header"},"Condition"),r.a.createElement("div",{className:"value"},t.condition.name)),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header"},"Min"),r.a.createElement("div",{className:"value"},"+",t.temp_min,r.a.createElement("sup",null,"\xb0"),"c")),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header"},"Max"),r.a.createElement("div",{className:"value"},"+",t.temp_max,r.a.createElement("sup",null,"\xb0"),"c"))))))))},K=function(e){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("lottie-player",{src:"https://assets6.lottiefiles.com/packages/lf20_Gg1cd9.json",background:"transparent",speed:"1",style:{width:"300px",height:"300px"},loop:!0,autoplay:!0}))};var $=function(){var e=Object(i.c)((function(e){return e.weather})),t=Object(Y.i)();if(null!==e.error){var a={errorCode:e.errorCode,error:e.error};t("/".concat(e.errorCode),{state:a})}return Object(n.useEffect)((function(){}),[e]),r.a.createElement("div",null,e.isLoading||""===e.weatherInfo.cityname?r.a.createElement(K,null):r.a.createElement(z,{weatherInfo:e.weatherInfo}))};var Q=function(e){return Object(J.a)(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null),r.a.createElement($,null))};a(69);var Z=function(e){var t=e.errorCode;e.error;return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"lottie"},function(e){switch(e){case 400:return r.a.createElement("lottie-player",{src:"https://assets7.lottiefiles.com/datafiles/mVuaYzsV6mwoEwK/data.json",background:"transparent",style:{height:"300px"},speed:"1",autoplay:!0});case 404:return r.a.createElement("lottie-player",{src:"https://assets3.lottiefiles.com/packages/lf20_IXf5MX.json",background:"transparent",style:{height:"300px"},speed:"1",autoplay:!0});case 500:return r.a.createElement("lottie-player",{src:"https://assets10.lottiefiles.com/packages/lf20_1e0yPa.json",background:"transparent",style:{height:"300px"},speed:"1",autoplay:!0});default:return r.a.createElement("lottie-player",{src:"https://assets2.lottiefiles.com/packages/lf20_Wq9UHU.json",background:"transparent",style:{height:"300px"},speed:"1",autoplay:!0})}}(t))))};var ee=function(e){var t=Object(Y.g)(),a=t.state,n=a.error,c=a.errorCode;return console.log("Props",t),r.a.createElement("div",{className:"error-template"},r.a.createElement(Z,{error:n,errorCode:c}),r.a.createElement("div",{className:"error-details"},n),r.a.createElement("div",{className:"error-actions"},r.a.createElement(V.b,{to:"/",className:"btn btn-primary btn-lg"},r.a.createElement("span",{className:"glyphicon glyphicon-home"}),"Take me home")))},te=function(e){var t=Object(u.e)(Object(u.c)({search:O,weather:R}),e,Object(u.d)(u.a.apply(void 0,M)));return G.run(D),t}();var ae=function(){return r.a.createElement(i.a,{store:te},r.a.createElement(l,null,r.a.createElement(V.a,null,r.a.createElement(Y.d,null,r.a.createElement(Y.b,{path:"/",element:r.a.createElement(Q,null)}),r.a.createElement(Y.b,{path:"/400"},r.a.createElement(ee,{errorCode:400,error:{message:"Request body not proper"}})),r.a.createElement(Y.b,{path:"/404"},r.a.createElement(ee,{errorCode:404,error:{messgae:"Page not found"}})),r.a.createElement(Y.b,{path:"/500"},r.a.createElement(ee,{errorCode:500,error:{message:"Server failure"}})),r.a.createElement(Y.b,{path:"*",element:r.a.createElement(Y.a,{to:"/404",replace:!0})})))))},ne=function(e){return r.a.createElement(ae,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(70);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.b044ddb5.chunk.js.map